<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name=keywords content="–ß–∞—Å—Ç–Ω–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è –º–Ω–æ–≥–æ–ª–µ—Ç–Ω–∏—Ö —Ä–∞—Å—Ç–µ–Ω–∏–π –¥–ª—è —Å—Ä–µ–¥–Ω–µ–π –ø–æ–ª–æ—Å—ã,  —Ä–∞—Å—Ç–µ–Ω–∏—è –ø–æ—á—Ç–æ–π, —Ä–∞—Å—Ç–µ–Ω–∏—è –¥–ª—è —Å–∞–¥–∞, –∫–æ–ª–ª–µ–∫—Ü–∏—è –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö —Ä–∞—Å—Ç–µ–Ω–∏–π, –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ä–∞—Å—Ç–µ–Ω–∏—è, —Å–∞–¥ –ø—Ä–∏—Ä–æ–¥–Ω–æ–≥–æ –æ–±–ª–∏–∫–∞,  —Ä–µ–¥–∫–∏–µ —Ä–∞—Å—Ç–µ–Ω–∏—è, –∫–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–Ω—ã–µ —Ä–∞—Å—Ç–µ–Ω–∏—è, —Ä–∞—Å—Ç–µ–Ω–∏—è –¥–ª—è —Ç–µ–Ω–∏—Å—Ç—ã—Ö –º–µ—Å—Ç, –Ω–µ–ø—Ä–∏—Ö–æ—Ç–ª–∏–≤—ã–µ —Ä–∞—Å—Ç–µ–Ω–∏—è, –ø–æ—á–≤–æ–ø–æ–∫—Ä–æ–≤–Ω—ã–µ —Ä–∞—Å—Ç–µ–Ω–∏—è, –ª–∏–∞–Ω—ã, –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–æ-–ª–∏—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–∞—Å—Ç–µ–Ω–∏—è, –ª–µ–∫–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–∞—Å—Ç–µ–Ω–∏—è, –ø–∞–ø–æ—Ä–æ—Ç–Ω–∏–∫–∏, –∑–ª–∞–∫–∏, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö —Ä–∞—Å—Ç–µ–Ω–∏–π, –æ–ø—Ç–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö —Ä–∞—Å—Ç–µ–Ω–∏–π, —Ü–≤–µ—Ç—É—â–∏–µ –∫—É—Å—Ç–∞—Ä–Ω–∏–∫–∏, —Ü–≤–µ—Ç—É—â–∏–µ —Ä–∞—Å—Ç–µ–Ω–∏—è, —Ü–≤–µ—Ç—ã –∫—É–ø–∏—Ç—å, –ø—Ä–æ–¥–∞–∂–∞ —Ä–∞—Å—Ç–µ–Ω–∏–π, —Ü–≤–µ—Ç—ã –¥–ª—è —Å–∞–¥–∞, –ø–æ—Å–∞–¥–æ—á–Ω—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª, –∫–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–Ω—ã–µ —Ä–∞—Å—Ç–µ–Ω–∏—è, —Ä–∞—Å—Ç–µ–Ω–∏—è —É –∫–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–µ—Ä–æ–≤, –∫–æ–ª–ª–µ–∫—Ü–∏—è —Ñ–ª–æ–∫—Å–æ–≤, –∫–æ–ª–ª–µ–∫—Ü–∏—è –ø–∏–æ–Ω–æ–≤, –∫–æ–ª–ª–µ–∫—Ü–∏—è –ª–∏–ª–µ–π–Ω–∏–∫–æ–≤, –∫–æ–ª–ª–µ–∫—Ü–∏—è —Ö–æ—Å—Ç, –∫–æ–ª–ª–µ–∫—Ü–∏–æ–Ω–Ω—ã–µ —Ö–æ—Å—Ç—ã">
	<title>–ê—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç –Ω–∞ 2026 –≥–æ–¥ - –ö–æ–ª–ª–µ–∫—Ü–∏—è –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –ö—É–ª—å—Ç—É—Ä</title>

    <script type="text/javascript" src="/js/prototype.js"></script>
    <script type="text/javascript" src="/js/scriptaculous.js?load=effects,builder"></script>
    <script type="text/javascript" src="/js/lightbox.js"></script>
    <script type="text/javascript" src="/js/menu.js" defer></script>
    <script type="text/javascript" src="/js/korzina.js"></script>

    <link rel="stylesheet" href="/css/style.css" type="text/css"/>
    <link rel="stylesheet" href="/css/lightbox.css" type="text/css" media="screen" />

    <!-- —Å—Ç–∏–ª–∏ –¥–ª—è market.html & korzina.html -->
    <link rel="stylesheet" href="/css/korzina.css" type="text/css"/>

</head>

<body bgcolor="#CCFFCC" link="#c71585" vlink="#2f4f4f">
<table border="0" width="100%">
    <tr> <!-- –Ω–∞—á–∞–ª–æ 1–π —Å—Ç—Ä–æ–∫–∏ -->
        <td width="250px"> <!-- –Ω–∞—á–∞–ª–æ 1–π —è—á–µ–π–∫–∏ -->
            <p> <img src="/Emblema.jpg" border="0" hspace="0" vspace="0"> </p>
        </td> <!-- –∫–æ–Ω–µ—Ü 1–π —è—á–µ–π–∫–∏ -->
        <td style="font-size: 40px; font-family: cursive" style="padding-left: 10px"> <!-- –Ω–∞—á–∞–ª–æ 2–π —è—á–µ–π–∫–∏ -->
            <span class="green">–ö–û</span>–ª–ª–µ–∫—Ü–∏—è<br/>
            <span class="green">–î–ï</span>–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö<br/>
            <span class="green">–ö–£</span>–ª—å—Ç—É<span class="green">–†</span>

        </td> <!-- –∫–æ–Ω–µ—Ü 2–π —è—á–µ–π–∫–∏ -->
    </tr> <!-- –∫–æ–Ω–µ—Ü 1–π —Å—Ç—Ä–æ–∫–∏ -->

    <tr>

        <td valign="top">

            <div data-include="/partials/menu.html">
                <noscript>
                    <p>–î–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–µ–Ω—é –≤–∫–ª—é—á–∏—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, JavaScript.</p>
                </noscript>
            </div>

            <br>

            <p style="font-size: 35px; font-family: cursive; text-align: center">
                –°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ
            </p>

        </td>
        <td style="text-align: center; padding-left: 10px"> <!-- –ò–∑–º–µ–Ω—è–µ–º–∞—è —è—á–µ–π–∫–∞ -->

            <p style='text-align:right;font-size:15.0pt'><b>
                –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:<br>1 –Ω–æ—è–±—Ä—è 2025
            </b></p>

            <h2>–ê–°–°–û–†–¢–ò–ú–ï–ù–¢<br/>–Ω–∞ 2026 –≥–æ–¥</h2>

            <span style='font-size:14.0pt;margin-right:16.65pt;text-align:justify;text-indent:36.0pt'>
                <p>
                    <b><span style='color:red'>–†–µ–∞–ª–∏–∑–∞—Ü–∏—è</span></b> –ø–æ—Å–∞–¥–æ—á–Ω–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è ...... 
                </p>
                <p>
                    <b>–° —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏ —Ä–∞—Å—Ç–µ–Ω–∏–π, –∞ —Ç–∞–∫–∂–µ —Å –∏—Ö –æ–ø–∏—Å–∞–Ω–∏–µ–º –º–æ–∂–Ω–æ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è .......... </b>
                </p>
            </span>

  
    <span><b>–ö–û–†–ó–ò–ù–ê: </b></span><button class="add-to-cart toggle-button" onclick="toggleCart()">–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∫–æ—Ä–∑–∏–Ω—É</button>
    <div class="cart-container" id="cart-container" style="display: none">
        <table id="cart-table" class="waffle">
            <thead>
                <tr>
                    <th class="s0">–§–æ—Ç–æ</th>
                    <th class="s0">–ö–æ–¥</th>
                    <th class="s1">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</th>
                    <th class="s0">–¶–µ–Ω–∞, —Ä—É–±.</th>
                    <th class="s0">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                    <th class="s0">–î–µ–π—Å—Ç–≤–∏–µ</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
        <p class="empty-cart" id="empty-message">–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞.</p>
    </div>
	<button id="checkout-button" class="checkout-button" onclick="window.location.href='korzina.html'" disabled>
	    –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑
	</button>

    <h2>–ö–∞—Ç–∞–ª–æ–≥ —Ä–∞—Å—Ç–µ–Ω–∏–π</h2>
	<div id="product-catalog">
        <div id="catalog-loading">
            <img src="images/loading2.gif" alt="–ó–∞–≥—Ä—É–∑–∫–∞...">
        </div>
        <div id="catalog-table"></div>
    </div>

    <script>
        // –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è: if (hasDigits(fifthCell.textContent)) { ... }
        const hasDigits = value => /\d/.test(value || '');
        
        const SHEETS_HTML_URL = 'https://docs.google.com/spreadsheets/u/0/d/e/2PACX-1vRoo-E5CSCKRu61wyj0BY9QcTcdsD7duVgwQ5iOCDm6oCseRcSxBD4eV-hrQIYEUqK8SRhgr21mhnKX/pubhtml/sheet?headers=false&gid=1092051209&single=true';

        async function loadCatalog() {
            const tableDiv = document.getElementById('catalog-table');
            const loadingEl = document.getElementById('catalog-loading');

            try {
                const response = await fetch(SHEETS_HTML_URL, { cache: 'no-store' });
                const data = await response.text();
                const match = data.match(/<table[\s\S]*?<\/table>/i);
                if (!match) throw new Error('–¢–∞–±–ª–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞: ' + SHEETS_HTML_URL);

                console.log('catalog HTML:\n', match[0]);
                tableDiv.innerHTML = match[0];
                addBuyButtons(tableDiv);
            } catch (e) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ç–∞–ª–æ–≥–∞', e);
                tableDiv.textContent = '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ç–∞–ª–æ–≥–∞';
            } finally {
                loadingEl?.remove();
            }
        }

		function addBuyButtons(catalogDiv) {
		    const rows = Array.from(catalogDiv.querySelectorAll('table tr'));

            // rows[0] is all empty ü§∑‚Äç‚ôÄÔ∏è
            if (rows[0]) {
                const firstRow = rows[0];
                firstRow.remove(); // strip the empty row from the table
                rows.shift(); // from the array too.
            }

		    rows.forEach((row, index) => {
		        const cells = row.querySelectorAll('td');

		        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–∏ –ø—è—Ç–∞—è –∫–æ–ª–æ–Ω–∫–∞ —Ü–µ–Ω—É
		        const priceCell = cells[4];

		        const hasPrice = priceCell && hasDigits(priceCell.textContent);

		        if (hasPrice) {
                    // trying to repair lost images...
    		        const firstCell = cells[0];

                    // const img = firstCell.querySelector('img');
                    // console.log('gsheet img=', img.outerHTML);
                    // TODO REMOVE
                    // if (img) {
                    const img = document.createElement('img');
                    firstCell.innerHTML = ''; // clear existing content
                    firstCell.appendChild(img);
                    img.src = `/price_2026/images/${cells[1].textContent.trim()}.jpg`;
                    // console.log('new img=', img);
                    // }
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –î–æ–±–∞–≤–∏—Ç—å —Ç–∞–º –≥–¥–µ "–¥–∞" –≤ 5,6,7 –∫–æ–ª–æ–Ω–∫–∞—Ö

                    for (let i = 5; i <= 7; i++) {
                        const seasonCell = cells[i];
                        if (seasonCell && seasonCell.textContent.trim().toLowerCase() === '–¥–∞') {   
// TODO dedup quantityInput with korzina.js?                         
                            const quantityInput = document.createElement('input');
                            quantityInput.type = 'number';
                            quantityInput.value = '1';
                            quantityInput.min = '1';
                            quantityInput.max = '10';
                            quantityInput.className = 'quantity-input';

                            const buyButton = document.createElement('button');
                            buyButton.textContent = '–î–æ–±–∞–≤–∏—Ç—å';
                            buyButton.className = 'add-to-cart';
                            buyButton.onclick = function () {
                                // –ó–∞–º–µ–Ω—è–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —è—á–µ–π–∫–∏ –Ω–∞ —Ç–µ–∫—Å—Ç "‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ"
                                seasonCell.innerHTML = '<span class="added">‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ</span>';
                                addToCartFromRow(row, quantityInput.value);
                            };

                            // TODO  add season id somehow
                            seasonCell.innerHTML = ''; // —É–±–∏—Ä–∞–µ–º "–¥–∞"
                            seasonCell.appendChild(quantityInput);
                            seasonCell.appendChild(buyButton);
                        }
                    }
		        }
		    });
		}

		function addToCartFromRow(row, quantity) {
		    const cells = row.querySelectorAll('td');
		    const photo = cells[0].innerHTML;
		    const code = cells[1].textContent;
		    const name = cells[2].textContent;
		    const price = cells[4].textContent;

		    const cart = JSON.parse(localStorage.getItem('cart')) || {};

		    if (cart[code]) {
		        cart[code].quantity += parseInt(quantity);
		    } else {
		        cart[code] = { photo, name, price, quantity: parseInt(quantity) };
		    }

		    localStorage.setItem('cart', JSON.stringify(cart));
			loadCart();
		}

        function toggleCart() {
            const cartContainer = document.getElementById('cart-container');
            const toggleButton = document.querySelector('.toggle-button');

            if (cartContainer.style.display === 'none' || cartContainer.style.display === '') {
                cartContainer.style.display = 'block';
                toggleButton.textContent = '–°–≤–µ—Ä–Ω—É—Ç—å –∫–æ—Ä–∑–∏–Ω—É';
            } else {
                cartContainer.style.display = 'none';
                toggleButton.textContent = '–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –∫–æ—Ä–∑–∏–Ω—É';
            }
        }

		window.onload = function () {
		    loadCart();
		    loadCatalog();
		};
    </script>
</td>
</tr>
</table>
</body>
</html>
